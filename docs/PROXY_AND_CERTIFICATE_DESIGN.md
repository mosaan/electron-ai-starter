# ãƒ—ãƒ­ã‚­ã‚·ã¨è¨¼æ˜æ›¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ©Ÿèƒ½ - è¨­è¨ˆæ›¸

**ä½œæˆæ—¥**: 2025-11-09
**æ‰¿èªæ—¥**: 2025-11-09
**å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v0.2.0
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… æ‰¿èªæ¸ˆã¿

## ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [èƒŒæ™¯ã¨èª²é¡Œ](#èƒŒæ™¯ã¨èª²é¡Œ)
- [ç¾çŠ¶åˆ†æ](#ç¾çŠ¶åˆ†æ)
- [è¦ä»¶å®šç¾©](#è¦ä»¶å®šç¾©)
- [æŠ€è¡“èª¿æŸ»çµæœ](#æŠ€è¡“èª¿æŸ»çµæœ)
- [è¨­è¨ˆæ–¹é‡](#è¨­è¨ˆæ–¹é‡)
- [å®Ÿè£…è¨ˆç”»](#å®Ÿè£…è¨ˆç”»)
- [ãƒªã‚¹ã‚¯ã¨åˆ¶ç´„äº‹é …](#ãƒªã‚¹ã‚¯ã¨åˆ¶ç´„äº‹é …)
- [å‚è€ƒè³‡æ–™](#å‚è€ƒè³‡æ–™)

---

## æ¦‚è¦

ä¼æ¥­ãƒ—ãƒ­ã‚­ã‚·ç’°å¢ƒï¼ˆZscalerç­‰ï¼‰ã§ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½¿ç”¨ã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚ã€ãƒ—ãƒ­ã‚­ã‚·ã¨HTTPSè¨¼æ˜æ›¸æ¤œè¨¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã€‚

### æä¾›ã™ã‚‹3ã¤ã®ãƒ¢ãƒ¼ãƒ‰

| ãƒ¢ãƒ¼ãƒ‰ | èª¬æ˜ | å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ |
|--------|------|-------------|
| **ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰** | OSæ¨™æº–ã®ãƒ—ãƒ­ã‚­ã‚·ãƒ»è¨¼æ˜æ›¸è¨­å®šã‚’ä½¿ç”¨ | ä¼æ¥­ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ |
| **ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ‰** | ã‚¢ãƒ—ãƒªç‹¬è‡ªã®è¨­å®šã‚’ä½¿ç”¨ | é«˜åº¦ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¿…è¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ |
| **ç„¡è¨­å®šãƒ¢ãƒ¼ãƒ‰** | ç´ ã®Node.jsçŠ¶æ…‹ï¼ˆç¾çŠ¶ã®å®Ÿè£…ï¼‰ | ãƒ—ãƒ­ã‚­ã‚·ä¸è¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ |

### å¯¾å¿œãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 

- **ç¬¬1ãƒ•ã‚§ãƒ¼ã‚º**: Windows ã®ã¿ï¼ˆæœ€ä½é™ã®è¦ä»¶ï¼‰
- **ç¬¬2ãƒ•ã‚§ãƒ¼ã‚ºä»¥é™**: macOS, Linuxï¼ˆå°†æ¥çš„ãªæ‹¡å¼µï¼‰

---

## èƒŒæ™¯ã¨èª²é¡Œ

### ä¼æ¥­ãƒ—ãƒ­ã‚­ã‚·ç’°å¢ƒã®ç‰¹å¾´

1. **SSL/TLS ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚·ãƒ§ãƒ³**
   - Zscalerç­‰ã®ä¼æ¥­ãƒ—ãƒ­ã‚­ã‚·ã¯é€šä¿¡ã‚’å¾©å·ãƒ»æ¤œæŸ»ã—ã¦å†æš—å·åŒ–
   - è‡ªå·±ç½²åè¨¼æ˜æ›¸ã‚„ä¼æ¥­ç‹¬è‡ªã®CAè¨¼æ˜æ›¸ã‚’ä½¿ç”¨
   - OSè¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢ã«ã¯ä¼æ¥­CAãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿

2. **ãƒ—ãƒ­ã‚­ã‚·è¨­å®š**
   - ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã¾ãŸã¯PACãƒ•ã‚¡ã‚¤ãƒ«ã§è‡ªå‹•æ§‹æˆ
   - HTTP_PROXY/HTTPS_PROXYç’°å¢ƒå¤‰æ•°ã§ã®æ‰‹å‹•è¨­å®š
   - èªè¨¼ãŒå¿…è¦ãªå ´åˆã‚‚ã‚ã‚‹

3. **ç¾çŠ¶ã®å•é¡Œ**
   - æœ¬ã‚¢ãƒ—ãƒªã®Backendãƒ—ãƒ­ã‚»ã‚¹ã¯Node.jsã§å‹•ä½œ
   - Node.jsã¯OSè¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢ã‚’**è‡ªå‹•ã§ã¯ä½¿ç”¨ã—ãªã„**
   - ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã‚‚**è‡ªå‹•ã§ã¯é©ç”¨ã•ã‚Œãªã„**
   - çµæœ: ä¼æ¥­ãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§AI APIã«æ¥ç¶šã§ããªã„

---

## ç¾çŠ¶åˆ†æ

### ç¾åœ¨ã®AIæ¥ç¶šå®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/backend/ai/factory.ts`

```typescript
export const FACTORY = {
  openai: {
    createModel: (apiKey: string, model: string) => createOpenAI({ apiKey })(model)
  },
  anthropic: {
    createModel: (apiKey: string, model: string) => createAnthropic({ apiKey })(model)
  },
  google: {
    createModel: (apiKey: string, model: string) => createGoogleGenerativeAI({ apiKey })(model)
  }
}
```

**å•é¡Œç‚¹**:
- ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ä½œæˆæ™‚ã«ãƒ—ãƒ­ã‚­ã‚·è¨­å®šãªã—
- è¨¼æ˜æ›¸æ¤œè¨¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãªã—
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®fetchå®Ÿè£…ã‚’ä½¿ç”¨ï¼ˆãƒ—ãƒ­ã‚­ã‚·ãƒ»è¨¼æ˜æ›¸è¨­å®šãªã—ï¼‰

---

## è¦ä»¶å®šç¾©

### æ©Ÿèƒ½è¦ä»¶

#### FR-1: ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰ï¼ˆWindowsï¼‰

- [ ] Windowsãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‹ã‚‰ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã‚’èª­ã¿å–ã‚Š
  - ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚­ãƒ¼: `HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings`
  - ProxyEnable, ProxyServer, ProxyOverride ç­‰
- [ ] Windowsè¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢ã‹ã‚‰ãƒ«ãƒ¼ãƒˆCAè¨¼æ˜æ›¸ã‚’èª­ã¿å–ã‚Š
  - Trusted Root Certification Authorities
- [ ] å–å¾—ã—ãŸè¨­å®šã‚’Backendãƒ—ãƒ­ã‚»ã‚¹ã®HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é©ç”¨
- [ ] è¨­å®šã®è‡ªå‹•æ›´æ–°ï¼ˆèµ·å‹•æ™‚ã€ã¾ãŸã¯å®šæœŸçš„ï¼‰

#### FR-2: ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ‰

- [ ] UIè¨­å®šç”»é¢ã§ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã‚’å…¥åŠ›
  - ãƒ—ãƒ­ã‚­ã‚·ãƒ›ã‚¹ãƒˆã€ãƒãƒ¼ãƒˆ
  - èªè¨¼ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼‰
  - ãƒã‚¤ãƒ‘ã‚¹ãƒªã‚¹ãƒˆ
- [ ] ã‚«ã‚¹ã‚¿ãƒ CAè¨¼æ˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
  - PEMå½¢å¼ã®ã‚µãƒãƒ¼ãƒˆ
  - è¤‡æ•°è¨¼æ˜æ›¸ã®å¯¾å¿œ
- [ ] è¨­å®šã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜ï¼ˆæš—å·åŒ–ï¼‰
- [ ] è¨­å®šã®ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ï¼ˆæ¥ç¶šç¢ºèªï¼‰

#### FR-3: ç„¡è¨­å®šãƒ¢ãƒ¼ãƒ‰

- [ ] ç¾çŠ¶ã®å®Ÿè£…ã‚’ç¶­æŒ
- [ ] ãƒ—ãƒ­ã‚­ã‚·ãƒ»è¨¼æ˜æ›¸ã®è¨­å®šã‚’ä¸€åˆ‡é©ç”¨ã—ãªã„

#### FR-4: ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ

- [ ] UIè¨­å®šç”»é¢ã§ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠ
- [ ] è¨­å®šå¤‰æ›´ã®å³æ™‚åæ˜ ã¾ãŸã¯å†èµ·å‹•è¦æ±‚
- [ ] ç¾åœ¨ã®ãƒ¢ãƒ¼ãƒ‰è¡¨ç¤º

### éæ©Ÿèƒ½è¦ä»¶

#### NFR-1: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- API ã‚­ãƒ¼ã¨åŒæ§˜ã€ãƒ—ãƒ­ã‚­ã‚·èªè¨¼æƒ…å ±ã¯æš—å·åŒ–ä¿å­˜
- ã‚«ã‚¹ã‚¿ãƒ CAè¨¼æ˜æ›¸ã®å®‰å…¨ãªä¿å­˜
- ãƒ­ã‚°ã«æ©Ÿå¯†æƒ…å ±ã‚’å‡ºåŠ›ã—ãªã„

#### NFR-2: ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£

- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ã€Œã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰ã€ï¼ˆä¼æ¥­ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ï¼‰
- ã‚¨ãƒ©ãƒ¼æ™‚ã®åˆ†ã‹ã‚Šã‚„ã™ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- æ¥ç¶šãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ã§å•é¡Œã®æ—©æœŸç™ºè¦‹

#### NFR-3: ä¿å®ˆæ€§

- ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä¾å­˜éƒ¨åˆ†ã®åˆ†é›¢
- å°†æ¥çš„ãªmacOS/Linuxå¯¾å¿œã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆ

---

## æŠ€è¡“èª¿æŸ»çµæœ

### ä½¿ç”¨ä¸­ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ©Ÿèƒ½

#### Vercel AI SDK

**å…¬å¼ã‚µãƒãƒ¼ãƒˆæ©Ÿèƒ½**:

ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼SDKï¼ˆ`@ai-sdk/openai`, `@ai-sdk/anthropic`, `@ai-sdk/google`ï¼‰ã¯ä»¥ä¸‹ã‚’ã‚µãƒãƒ¼ãƒˆ:

```typescript
createOpenAI({
  apiKey: string,
  baseURL?: string,        // ãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã®å ´åˆã«å¤‰æ›´å¯èƒ½
  headers?: Record<string, string>,  // ã‚«ã‚¹ã‚¿ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼
  fetch?: typeof fetch     // ã‚«ã‚¹ã‚¿ãƒ fetchå®Ÿè£…
})
```

**é‡è¦**: `fetch` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ãˆã°ã€ãƒ—ãƒ­ã‚­ã‚·ã¨è¨¼æ˜æ›¸ã‚’å®Œå…¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã€‚

**å‚è€ƒ**:
- GitHub Discussion: [Could I make the ai sdk work through my local proxy? #3870](https://github.com/vercel/ai/discussions/3870)
- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: AI SDK Providers

### Node.jsã®ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒãƒ¼ãƒˆ

#### 1. `https.Agent` (Node.jsæ¨™æº–)

```typescript
import https from 'https'
import fs from 'fs'

const agent = new https.Agent({
  ca: fs.readFileSync('/path/to/ca-cert.pem'),  // ã‚«ã‚¹ã‚¿ãƒ CAè¨¼æ˜æ›¸
  proxy: 'http://proxy.example.com:8080'        // Note: proxyã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯å­˜åœ¨ã—ãªã„
})
```

**åˆ¶ç´„**: æ¨™æº–ã®`https.Agent`ã¯ç›´æ¥ãƒ—ãƒ­ã‚­ã‚·ã‚’ã‚µãƒãƒ¼ãƒˆ**ã—ãªã„**ã€‚

#### 2. `https-proxy-agent` (npm)

```typescript
import { HttpsProxyAgent } from 'https-proxy-agent'
import fs from 'fs'

const agent = new HttpsProxyAgent('http://proxy.example.com:8080', {
  ca: fs.readFileSync('/path/to/ca-cert.pem')
})
```

**åˆ©ç‚¹**:
- HTTPSãƒ—ãƒ­ã‚­ã‚·å°‚ç”¨
- CAè¨¼æ˜æ›¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½
- ãƒ—ãƒ­ã‚­ã‚·èªè¨¼ã‚µãƒãƒ¼ãƒˆ
- åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹ï¼ˆå®‰å®šï¼‰

#### 3. `undici` ProxyAgent (Node.js 18+)

```typescript
import { ProxyAgent, fetch } from 'undici'

const dispatcher = new ProxyAgent({
  uri: 'http://proxy.example.com:8080',
  // Note: CAè¨¼æ˜æ›¸ã®è¨­å®šã¯connectã‚ªãƒ—ã‚·ãƒ§ãƒ³å†…
})

const response = await fetch('https://api.example.com', { dispatcher })
```

**åˆ©ç‚¹**:
- Node.js 18+ã®æ–°ã—ã„fetchå®Ÿè£…
- é«˜æ€§èƒ½
- å°†æ¥çš„ã«Node.jsæ¨™æº–ã«ãªã‚‹å¯èƒ½æ€§

**åˆ¶ç´„**:
- CAè¨¼æ˜æ›¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒè¤‡é›‘
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒä¸è¶³

#### 4. `global-agent` (npm)

```typescript
import { bootstrap } from 'global-agent'

bootstrap()

// ç’°å¢ƒå¤‰æ•°ã§è¨­å®š:
// GLOBAL_AGENT_HTTP_PROXY=http://proxy.example.com:8080
```

**åˆ©ç‚¹**:
- ã™ã¹ã¦ã®HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã«è‡ªå‹•é©ç”¨
- ç’°å¢ƒå¤‰æ•°ãƒ™ãƒ¼ã‚¹ã§è¨­å®šãŒç°¡å˜

**åˆ¶ç´„**:
- CAè¨¼æ˜æ›¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã¯`NODE_EXTRA_CA_CERTS`ç’°å¢ƒå¤‰æ•°ã«ä¾å­˜
- ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã®ãŸã‚ã€ç´°ã‹ã„åˆ¶å¾¡ãŒé›£ã—ã„

### Windowsã‚·ã‚¹ãƒ†ãƒ è¨­å®šã®å–å¾—

#### ãƒ—ãƒ­ã‚­ã‚·è¨­å®š

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | æœ€çµ‚æ›´æ–° | æ©Ÿèƒ½ | æ¨å¥¨åº¦ |
|-----------|---------|------|--------|
| `get-proxy-settings` | 5å¹´å‰ | ãƒ¬ã‚¸ã‚¹ãƒˆãƒªèª­ã¿å–ã‚Šã€ç’°å¢ƒå¤‰æ•° | âŒ å¤ã„ï¼ˆéæ¨å¥¨ï¼‰ |
| `get-windows-proxy` | - | ãƒ¬ã‚¸ã‚¹ãƒˆãƒªç›´æ¥èª­ã¿å–ã‚Š | âŒ `@cypress/*`ã«ç§»è¡Œæ¸ˆã¿ |
| `@cypress/get-windows-proxy` | ç©æ¥µçš„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ | Cypressè£½ã€ãƒ¬ã‚¸ã‚¹ãƒˆãƒªèª­ã¿å–ã‚Š | âœ…âœ… æœ€æ¨å¥¨ |
| `windows-system-proxy` | 4å¹´å‰ | HTTP Toolkitè£½ | âš ï¸ éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ï¼ˆé€±80DLï¼‰ |

**ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚­ãƒ¼**:
```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings
  - ProxyEnable (DWORD): 0=ç„¡åŠ¹, 1=æœ‰åŠ¹
  - ProxyServer (String): "proxy.example.com:8080"
  - ProxyOverride (String): ãƒã‚¤ãƒ‘ã‚¹ãƒªã‚¹ãƒˆ
  - AutoConfigURL (String): PACãƒ•ã‚¡ã‚¤ãƒ«URL
```

#### è¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | æ©Ÿèƒ½ | æ¨å¥¨åº¦ |
|-----------|------|--------|
| `win-ca` | ãƒ«ãƒ¼ãƒˆCAè¨¼æ˜æ›¸å–å¾—ã€è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« | âœ…âœ… æ¨å¥¨ |
| `@zwodder/win-ca` | win-caã®ãƒ•ã‚©ãƒ¼ã‚¯ | âš ï¸ ãƒ•ã‚©ãƒ¼ã‚¯ |
| `win-ca-ffi` | FFIç‰ˆ | âš ï¸ è¤‡é›‘ |

**`win-ca` ã®ä½¿ç”¨æ–¹æ³•**:

```typescript
import winCa from 'win-ca'

// https.globalAgent.options.ca ã«è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
winCa()

// ã¾ãŸã¯è¨¼æ˜æ›¸ã‚’å–å¾—ã—ã¦ä½¿ç”¨
const certs: string[] = []
winCa({ format: winCa.der2.pem, ondata: (cert) => certs.push(cert) })
```

**åˆ©ç‚¹**:
- Windowsè¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢ã‹ã‚‰ç›´æ¥èª­ã¿å–ã‚Š
- é‡è¤‡æ’é™¤
- è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¾ãŸã¯è¨¼æ˜æ›¸é…åˆ—ã®å–å¾—
- åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹

### Electronã®æ©Ÿèƒ½

#### Chromiumå´ï¼ˆRenderer Processï¼‰

```typescript
// Main Process
app.commandLine.appendSwitch('proxy-server', 'proxy.example.com:8080')

// ã¾ãŸã¯ session.setProxy
const { session } = require('electron')
session.defaultSession.setProxy({
  mode: 'system',  // ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚­ã‚·ä½¿ç”¨
  // ã¾ãŸã¯
  proxyRules: 'http://proxy.example.com:8080'
})
```

**åˆ¶ç´„**: **Backend Processã®Node.js HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã¯å½±éŸ¿ã—ãªã„**

#### è¨¼æ˜æ›¸æ¤œè¨¼ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼ˆChromiumå´ã®ã¿ï¼‰

```typescript
app.on('certificate-error', (event, webContents, url, error, certificate, callback) => {
  event.preventDefault()
  callback(true) // è¨¼æ˜æ›¸ã‚’ä¿¡é ¼
})
```

**åˆ¶ç´„**: **Backend Processã®Node.js HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã¯å½±éŸ¿ã—ãªã„**

#### é‡è¦ãªè€ƒå¯Ÿ: Electronã®2ã¤ã®HTTPå®Ÿè£…

Electronã‚¢ãƒ—ãƒªã«ã¯**2ã¤ã®ç‹¬ç«‹ã—ãŸHTTPå®Ÿè£…**ãŒã‚ã‚‹:

1. **Chromiumå´** (Renderer Process, Main Processã®BrowserWindowç­‰)
   - `fetch()`, `XMLHttpRequest` ç­‰
   - Electronã®`session.setProxy()`ã§è¨­å®šå¯èƒ½
   - ã‚·ã‚¹ãƒ†ãƒ è¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢ã‚’è‡ªå‹•ä½¿ç”¨ï¼ˆChromiumã®å‹•ä½œï¼‰

2. **Node.jså´** (Backend Process, Main Processã®Node.jsã‚³ãƒ¼ãƒ‰)
   - `http`, `https`, `node-fetch`, `undici` ç­‰
   - **ç‹¬è‡ªã«è¨­å®šãŒå¿…è¦**
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã‚·ã‚¹ãƒ†ãƒ è¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢ã‚’ä½¿ã‚ãªã„

**æœ¬ã‚¢ãƒ—ãƒªã®å ´åˆ**: AI SDKå‘¼ã³å‡ºã—ã¯Backend Processï¼ˆNode.jså´ï¼‰ã§è¡Œã‚ã‚Œã‚‹ãŸã‚ã€**Node.jså´ã®è¨­å®šãŒå¿…è¦**ã€‚

### ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

#### `NODE_EXTRA_CA_CERTS`

```bash
NODE_EXTRA_CA_CERTS=/path/to/ca-bundle.pem
```

**åˆ©ç‚¹**:
- Node.jsæ¨™æº–ã®æ©Ÿèƒ½
- ã™ã¹ã¦ã®HTTPSãƒªã‚¯ã‚¨ã‚¹ãƒˆã«é©ç”¨

**åˆ¶ç´„**:
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãŒå¿…è¦ï¼ˆå‹•çš„ãªè¨¼æ˜æ›¸å–å¾—ã«ã¯ä¸å‘ãï¼‰
- Electronã§ã¯ä¸€éƒ¨å‹•ä½œã—ãªã„å ±å‘Šã‚ã‚Š

#### ãƒ—ãƒ­ã‚­ã‚·ç’°å¢ƒå¤‰æ•°

```bash
HTTP_PROXY=http://proxy.example.com:8080
HTTPS_PROXY=http://proxy.example.com:8080
NO_PROXY=localhost,127.0.0.1
```

**åˆ©ç‚¹**:
- ä¸€éƒ¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè‡ªå‹•èªè­˜ï¼ˆ`global-agent`ç­‰ï¼‰

**åˆ¶ç´„**:
- AI SDKã¯ç’°å¢ƒå¤‰æ•°ã‚’è‡ªå‹•ã§ã¯ä½¿ã‚ãªã„
- ã‚«ã‚¹ã‚¿ãƒ fetchã§å¯¾å¿œãŒå¿…è¦

---

## è¨­è¨ˆæ–¹é‡

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡

1. **Backend Processä¸­å¿ƒã®å®Ÿè£…**
   - AI SDKå‘¼ã³å‡ºã—ã¯Backend Processã§å®Ÿè¡Œ
   - Node.jså´ã®HTTPè¨­å®šã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

2. **ã‚«ã‚¹ã‚¿ãƒ fetchå®Ÿè£…ã«ã‚ˆã‚‹çµ±ä¸€çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**
   - AI SDKã®`fetch`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ´»ç”¨
   - ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã”ã¨ã®å€‹åˆ¥è¨­å®šãŒä¸è¦

3. **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä¾å­˜éƒ¨åˆ†ã®åˆ†é›¢**
   - Windowså°‚ç”¨ã‚³ãƒ¼ãƒ‰ã¯ç‹¬ç«‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–
   - å°†æ¥çš„ãªmacOS/Linuxå¯¾å¿œã‚’å®¹æ˜“ã«

4. **è¨­å®šã®æ°¸ç¶šåŒ–ã¨ç®¡ç†**
   - æ—¢å­˜ã®settingsãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ´»ç”¨
   - æ–°ã—ã„ã‚­ãƒ¼: `'proxy'`, `'certificate'`

### æŠ€è¡“é¸å®š

#### æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ: ã‚«ã‚¹ã‚¿ãƒ fetch + https-proxy-agent

```typescript
import { HttpsProxyAgent } from 'https-proxy-agent'
import nodeFetch from 'node-fetch'

// ãƒ—ãƒ­ã‚­ã‚·ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä½œæˆ
const agent = new HttpsProxyAgent(proxyUrl, { ca: caCerts })

// ã‚«ã‚¹ã‚¿ãƒ fetch
const customFetch = (input: RequestInfo, init?: RequestInit) => {
  return nodeFetch(input, { ...init, agent })
}

// AI SDKã«æ¸¡ã™
const model = createOpenAI({ apiKey, fetch: customFetch })(modelName)
```

**ç†ç”±**:
- AI SDKã®å…¬å¼ã‚µãƒãƒ¼ãƒˆæ©Ÿèƒ½ã‚’æ´»ç”¨
- ãƒ—ãƒ­ã‚­ã‚·ã¨è¨¼æ˜æ›¸ã‚’ä¸€ç®‡æ‰€ã§ç®¡ç†
- å®‰å®šã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆ`https-proxy-agent`ï¼‰
- Node.js 16+ã§å‹•ä½œï¼ˆäº’æ›æ€§ãŒé«˜ã„ï¼‰

#### Windowsã‚·ã‚¹ãƒ†ãƒ è¨­å®šå–å¾—

**ãƒ—ãƒ­ã‚­ã‚·**: `@cypress/get-windows-proxy`
- Cypressè£½ã€ç©æ¥µçš„ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
- ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‹ã‚‰è¨­å®šã‚’èª­ã¿å–ã‚Š
- HTTP_PROXY/NO_PROXYäº’æ›å½¢å¼ã§è¿”ã™
- MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

**è¨¼æ˜æ›¸**: `win-ca`
- åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹
- ã‚·ãƒ³ãƒ—ãƒ«ãªAPI
- è¨¼æ˜æ›¸é…åˆ—ã®å–å¾—ãŒå®¹æ˜“

### ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

#### è¨­å®šãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µ

æ—¢å­˜: `src/backend/db/schema.ts`

```typescript
// æ–°ã—ã„è¨­å®šã‚­ãƒ¼
export type ProxySettings = {
  mode: 'system' | 'custom' | 'none'

  // ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ‰ç”¨
  custom?: {
    host: string
    port: number
    protocol: 'http' | 'https' | 'socks5'
    auth?: {
      username: string
      password: string  // æš—å·åŒ–ä¿å­˜
    }
    bypass?: string[]  // ãƒã‚¤ãƒ‘ã‚¹ãƒªã‚¹ãƒˆ
  }

  // ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰è¨­å®š
  system?: {
    autoDetect: boolean
    refreshInterval: number  // ãƒŸãƒªç§’
  }
}

export type CertificateSettings = {
  mode: 'system' | 'custom' | 'none'

  // ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ‰ç”¨
  custom?: {
    caPaths: string[]  // PEMãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
  }

  // ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰è¨­å®š
  system?: {
    autoDetect: boolean
  }
}
```

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜:
```json
// key='proxy'
{
  "mode": "system",
  "system": {
    "autoDetect": true,
    "refreshInterval": 300000
  }
}

// key='certificate'
{
  "mode": "system",
  "system": {
    "autoDetect": true
  }
}
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

```mermaid
graph TB
    Settings[Settings Manager<br/>src/backend/settings/proxy.ts] -->|è¨­å®šèª­ã¿å–ã‚Š| DB[(Database)]

    subgraph "Platform Layer"
        WinProxy[Windows Proxy Reader<br/>@cypress/get-windows-proxy]
        WinCert[Windows Cert Reader<br/>win-ca]
    end

    Settings -->|system mode| WinProxy
    Settings -->|system mode| WinCert

    Factory[AI Factory<br/>src/backend/ai/factory.ts] -->|å–å¾—| Settings
    Factory -->|ã‚«ã‚¹ã‚¿ãƒ fetchä½œæˆ| FetchBuilder[Fetch Builder<br/>src/backend/ai/fetch.ts]

    FetchBuilder -->|ä½¿ç”¨| ProxyAgent[https-proxy-agent]
    FetchBuilder -->|CAè¨­å®š| NodeFetch[node-fetch]

    Factory -->|AIãƒ¢ãƒ‡ãƒ«ä½œæˆ| SDK[AI SDK Providers<br/>@ai-sdk/*]
```

### æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
src/backend/
â”œâ”€â”€ ai/
â”‚   â”œâ”€â”€ factory.ts              # æ—¢å­˜ï¼ˆå¤‰æ›´ï¼‰
â”‚   â”œâ”€â”€ fetch.ts                # æ–°è¦: ã‚«ã‚¹ã‚¿ãƒ fetchä½œæˆ
â”‚   â””â”€â”€ ...
â”œâ”€â”€ settings/
â”‚   â”œâ”€â”€ proxy.ts                # æ–°è¦: ãƒ—ãƒ­ã‚­ã‚·è¨­å®šç®¡ç†
â”‚   â””â”€â”€ certificate.ts          # æ–°è¦: è¨¼æ˜æ›¸è¨­å®šç®¡ç†
â”œâ”€â”€ platform/
â”‚   â”œâ”€â”€ windows/
â”‚   â”‚   â”œâ”€â”€ proxy.ts            # æ–°è¦: Windowsãƒ—ãƒ­ã‚­ã‚·å–å¾—
â”‚   â”‚   â””â”€â”€ certificate.ts      # æ–°è¦: Windowsè¨¼æ˜æ›¸å–å¾—
â”‚   â”œâ”€â”€ macos/                  # å°†æ¥ç”¨
â”‚   â””â”€â”€ linux/                  # å°†æ¥ç”¨
â””â”€â”€ ...

src/renderer/src/
â””â”€â”€ components/
    â””â”€â”€ settings/
        â”œâ”€â”€ ProxySettings.tsx   # æ–°è¦: ãƒ—ãƒ­ã‚­ã‚·è¨­å®šUI
        â””â”€â”€ CertificateSettings.tsx  # æ–°è¦: è¨¼æ˜æ›¸è¨­å®šUI
```

---

## å®Ÿè£…è¨ˆç”»

### ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤å®Ÿè£…ï¼ˆWindows ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰ï¼‰

**ç›®æ¨™**: Windowsã‚·ã‚¹ãƒ†ãƒ è¨­å®šã‚’ä½¿ç”¨ã—ã¦AIæ¥ç¶šã‚’å¯èƒ½ã«ã™ã‚‹

**ã‚¿ã‚¹ã‚¯**:

1. **ä¾å­˜é–¢ä¿‚è¿½åŠ **
   ```bash
   pnpm add https-proxy-agent node-fetch
   pnpm add @cypress/get-windows-proxy win-ca
   pnpm add -D @types/node-fetch
   ```

2. **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å±¤å®Ÿè£…**
   - `src/backend/platform/windows/proxy.ts`
     - `@cypress/get-windows-proxy`ã‚’ä½¿ç”¨
     - ãƒ—ãƒ­ã‚­ã‚·è¨­å®šå–å¾—é–¢æ•°
   - `src/backend/platform/windows/certificate.ts`
     - `win-ca`ã‚’ä½¿ç”¨
     - CAè¨¼æ˜æ›¸é…åˆ—å–å¾—é–¢æ•°

3. **è¨­å®šç®¡ç†å±¤å®Ÿè£…**
   - `src/backend/settings/proxy.ts`
     - ProxySettingså‹å®šç¾©
     - getProxyConfig()é–¢æ•°
     - updateProxySettings()é–¢æ•°
   - `src/backend/settings/certificate.ts`
     - CertificateSettingså‹å®šç¾©
     - getCertificateConfig()é–¢æ•°

4. **Fetch Builderå®Ÿè£…**
   - `src/backend/ai/fetch.ts`
     - createCustomFetch()é–¢æ•°
     - ãƒ—ãƒ­ã‚­ã‚·ãƒ»è¨¼æ˜æ›¸è¨­å®šã‚’å—ã‘å–ã‚Šã€ã‚«ã‚¹ã‚¿ãƒ fetchä½œæˆ

5. **AI Factoryå¤‰æ›´**
   - `src/backend/ai/factory.ts`
     - createModel()ã«custom fetché©ç”¨
     - ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ä½œæˆæ™‚ã«è¨­å®šã‚’èª­ã¿è¾¼ã¿

6. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã®è¿½åŠ ï¼ˆã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰ï¼‰

7. **ãƒ†ã‚¹ãƒˆ**
   - Windowsãƒ—ãƒ­ã‚­ã‚·ç’°å¢ƒã§AIæ¥ç¶šãƒ†ã‚¹ãƒˆ
   - ãƒ­ã‚°å‡ºåŠ›ã®ç¢ºèª

**æˆæœç‰©**:
- Windowsã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚­ã‚·ãƒ»è¨¼æ˜æ›¸ã§AIæ¥ç¶šå¯èƒ½
- ãƒ­ã‚°ã«ãƒ—ãƒ­ã‚­ã‚·ä½¿ç”¨çŠ¶æ³ã‚’å‡ºåŠ›

### ãƒ•ã‚§ãƒ¼ã‚º2: UIå®Ÿè£…ï¼ˆã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ‰ï¼‰

**ç›®æ¨™**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨­å®šç”»é¢ã§ãƒ—ãƒ­ã‚­ã‚·ãƒ»è¨¼æ˜æ›¸ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã«ã™ã‚‹

**ã‚¿ã‚¹ã‚¯**:

1. **IPC APIè¿½åŠ **
   - ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã®å–å¾—ãƒ»æ›´æ–°
   - è¨¼æ˜æ›¸è¨­å®šã®å–å¾—ãƒ»æ›´æ–°
   - æ¥ç¶šãƒ†ã‚¹ãƒˆ

2. **UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…**
   - `ProxySettings.tsx`: ãƒ—ãƒ­ã‚­ã‚·è¨­å®šç”»é¢
     - ãƒ¢ãƒ¼ãƒ‰é¸æŠï¼ˆsystem/custom/noneï¼‰
     - ã‚«ã‚¹ã‚¿ãƒ è¨­å®šå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
     - æ¥ç¶šãƒ†ã‚¹ãƒˆãƒœã‚¿ãƒ³
   - `CertificateSettings.tsx`: è¨¼æ˜æ›¸è¨­å®šç”»é¢
     - ãƒ¢ãƒ¼ãƒ‰é¸æŠ
     - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - æ—¢å­˜ã®Settingsç”»é¢ã«çµ±åˆ

3. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ©Ÿèƒ½è¿½åŠ **
   - æ¥ç¶šãƒ†ã‚¹ãƒˆæ©Ÿèƒ½
   - ã‚«ã‚¹ã‚¿ãƒ CAè¨¼æ˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿

4. **ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–**
   - ãƒ—ãƒ­ã‚­ã‚·èªè¨¼æƒ…å ±ã®æš—å·åŒ–
   - æ—¢å­˜ã®APIã‚­ãƒ¼æš—å·åŒ–ã¨åŒã˜æ–¹æ³•ã‚’ä½¿ç”¨

5. **ãƒ†ã‚¹ãƒˆ**
   - ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã§ã®æ¥ç¶šãƒ†ã‚¹ãƒˆ
   - UIæ“ä½œã®ç¢ºèª

**æˆæœç‰©**:
- å®Œå…¨ãªè¨­å®šUI
- ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ã‚­ã‚·ãƒ»è¨¼æ˜æ›¸ã§ã®æ¥ç¶š

### ãƒ•ã‚§ãƒ¼ã‚º3: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨æ”¹å–„

**ç›®æ¨™**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ä½¿ã„ã‚„ã™ã•ã®å‘ä¸Š

**ã‚¿ã‚¹ã‚¯**:

1. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
   - ãƒ—ãƒ­ã‚­ã‚·æ¥ç¶šã‚¨ãƒ©ãƒ¼ã®æ¤œå‡ºã¨è¡¨ç¤º
   - è¨¼æ˜æ›¸ã‚¨ãƒ©ãƒ¼ã®æ¤œå‡ºã¨è¡¨ç¤º
   - åˆ†ã‹ã‚Šã‚„ã™ã„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

2. **ãƒ­ã‚°æ”¹å–„**
   - ãƒ—ãƒ­ã‚­ã‚·ä½¿ç”¨çŠ¶æ³ã®ãƒ­ã‚°
   - è¨¼æ˜æ›¸æ¤œè¨¼ã®ãƒ­ã‚°
   - ãƒ‡ãƒãƒƒã‚°æƒ…å ±

3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
   - `docs/PROXY_CONFIGURATION.md`ä½œæˆ
   - ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰
   - CLAUDE.mdã«ä½¿ç”¨æ–¹æ³•ã‚’è¿½åŠ 

4. **ãƒ†ã‚¹ãƒˆ**
   - å„ç¨®ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆ
   - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ¬ãƒ“ãƒ¥ãƒ¼

**æˆæœç‰©**:
- å®Œå…¨ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ãƒ•ã‚§ãƒ¼ã‚º4ï¼ˆå°†æ¥ï¼‰: macOS/Linuxå¯¾å¿œ

**ç›®æ¨™**: ä»–ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰å®Ÿè£…

**ã‚¿ã‚¹ã‚¯**:
- macOSè¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢ï¼ˆKeychainï¼‰ã‹ã‚‰ã®èª­ã¿å–ã‚Š
- macOSã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚­ã‚·è¨­å®šèª­ã¿å–ã‚Š
- Linuxã®`/etc/ssl/certs`å¯¾å¿œ

---

## å®Ÿè£…çŠ¶æ³ï¼ˆ2025-11-09æ™‚ç‚¹ï¼‰

### Phase 1: å®Œäº†ã—ãŸå®Ÿè£…

**ã‚³ãƒŸãƒƒãƒˆ**: `86d934b` (2025-11-09)

#### å®Ÿè£…ã•ã‚ŒãŸæ©Ÿèƒ½

1. **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å±¤** âœ…
   - `src/backend/platform/windows/proxy.ts` - Windows ãƒ—ãƒ­ã‚­ã‚·è¨­å®šå–å¾—
   - `src/backend/platform/windows/certificate.ts` - Windows è¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢ã‚¢ã‚¯ã‚»ã‚¹

2. **è¨­å®šç®¡ç†å±¤** âœ…
   - `src/backend/settings/proxy.ts` - ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã®èª­ã¿æ›¸ããƒ»ãƒ¢ãƒ¼ãƒ‰ç®¡ç†
   - `src/backend/settings/certificate.ts` - è¨¼æ˜æ›¸è¨­å®šã®èª­ã¿æ›¸ããƒ»ãƒ¢ãƒ¼ãƒ‰ç®¡ç†

3. **Fetch Builder** âœ…
   - `src/backend/ai/fetch.ts` - ã‚«ã‚¹ã‚¿ãƒ fetché–¢æ•°ä½œæˆ
   - ãƒ—ãƒ­ã‚­ã‚·ãƒ»è¨¼æ˜æ›¸ã‚’çµ±åˆã—ãŸHTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

4. **AI Factoryçµ±åˆ** âœ…
   - `src/backend/ai/factory.ts` - ã‚«ã‚¹ã‚¿ãƒ fetchã‚’AI SDKã«æ¸¡ã™å®Ÿè£…

5. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³** âœ…
   - `resources/db/migrations/0001_add_default_proxy_certificate_settings.sql`
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚·ã‚¹ãƒ†ãƒ ãƒ¢ãƒ¼ãƒ‰ã‚’è¨­å®š

6. **TypeScriptå‹å®šç¾©** âœ…
   - `src/common/types.ts` - ProxySettings, CertificateSettingså‹

#### å°å…¥ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

```json
{
  "https-proxy-agent": "^7.0.5",
  "node-fetch": "^2.7.0",
  "@cypress/get-windows-proxy": "^1.8.2",
  "win-ca": "^3.5.1"
}
```

#### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆWIPï¼‰

**ã‚³ãƒŸãƒƒãƒˆ**: `d8da79a` (2025-11-09)

- `tests/backend/proxy.test.ts` - ãƒ—ãƒ­ã‚­ã‚·è¨­å®šç®¡ç†ã®ãƒ†ã‚¹ãƒˆ
- `tests/backend/certificate.test.ts` - è¨¼æ˜æ›¸è¨­å®šç®¡ç†ã®ãƒ†ã‚¹ãƒˆ
- `tests/backend/fetch.test.ts` - ã‚«ã‚¹ã‚¿ãƒ fetch builderã®ãƒ†ã‚¹ãƒˆ

**ç¾çŠ¶**: ãƒ†ã‚¹ãƒˆã¯ä½œæˆæ¸ˆã¿ã ãŒã€ã‚¤ãƒ³ãƒ•ãƒ©å•é¡Œã§å®Ÿè¡Œã§ããªã„ï¼ˆè©³ç´°ã¯æ¬¡ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼‰

### ç¾åœ¨ã®èª²é¡Œã¨ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨ˆç”»

#### èª²é¡Œ1: ãƒ†ã‚¹ãƒˆã‚¤ãƒ³ãƒ•ãƒ©ã®å•é¡Œ

**å•é¡Œ**:
- `logger`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒimportæ™‚ã«IPCé€šä¿¡ï¼ˆ`process.send`ï¼‰ã‚’ä½¿ç”¨
- ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã¯`process.send`ãŒæœªå®šç¾©ã§ãƒ¢ãƒƒã‚¯è¨­å®šå‰ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãŒåˆæœŸåŒ–ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ‘ã‚¹è§£æ±ºã«å¤±æ•—
- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®å¾ªç’°ä¾å­˜ãŒå­˜åœ¨

**å½±éŸ¿**:
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã§ããªã„ï¼ˆ`The 'path' argument must be of type string. Received undefined`ã‚¨ãƒ©ãƒ¼ï¼‰
- ãƒ¢ãƒƒã‚¯ãŒåŠ¹ã‹ãªã„ï¼ˆimportæ™‚ã®å‰¯ä½œç”¨ãŒç™ºç”Ÿï¼‰

**æ ¹æœ¬åŸå› **:
```typescript
// src/backend/logger.ts - importæ™‚ã«å³åº§ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–
const logger = new BackendLogger('backend')  // process.send ã‚’ä½¿ç”¨
export default logger

// src/backend/settings/proxy.ts - importæ™‚ã« logger ã‚’èª­ã¿è¾¼ã¿
import logger from '../logger'
const proxyLogger = logger.child('settings:proxy')  // ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§å®Ÿè¡Œ
```

#### ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨ˆç”»

##### å„ªå…ˆåº¦1: Logger ã® Lazy Initializationï¼ˆé«˜ï¼‰

**ç›®çš„**: ãƒ†ã‚¹ãƒˆæ™‚ã«loggerã®ãƒ¢ãƒƒã‚¯ã‚’å¯èƒ½ã«ã™ã‚‹

**å¤‰æ›´å†…å®¹**:
```typescript
// src/backend/logger.ts
class BackendLogger {
  private static instance: BackendLogger | null = null

  static getInstance(scope: string = 'backend'): BackendLogger {
    if (!BackendLogger.instance) {
      BackendLogger.instance = new BackendLogger(scope)
    }
    return BackendLogger.instance
  }

  // ãƒ†ã‚¹ãƒˆç”¨ã®ãƒªã‚»ãƒƒãƒˆ
  static resetForTest(): void {
    BackendLogger.instance = null
  }
}

export function getLogger(scope?: string): BackendLogger {
  return scope
    ? BackendLogger.getInstance('backend').child(scope)
    : BackendLogger.getInstance('backend')
}
```

**ä½¿ç”¨å´ã®å¤‰æ›´**:
```typescript
// Before
import logger from '../logger'
const proxyLogger = logger.child('settings:proxy')

// After
import { getLogger } from '../logger'
// é–¢æ•°å†…ã§ä½¿ç”¨
const proxyLogger = getLogger('settings:proxy')
```

##### å„ªå…ˆåº¦2: ä¾å­˜æ€§æ³¨å…¥ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å°å…¥ï¼ˆä¸­ï¼‰

**ç›®çš„**: ãƒ†ã‚¹ãƒˆæ™‚ã«ä¾å­˜é–¢ä¿‚ã‚’ãƒ¢ãƒƒã‚¯å¯èƒ½ã«ã™ã‚‹

**å¤‰æ›´å†…å®¹**:
```typescript
// src/backend/settings/proxy.ts
export async function getProxySettings(
  deps = {
    getSetting: getSetting,
    getSystemProxy: getSystemProxySettings,
    logger: getLogger('settings:proxy')
  }
): Promise<ProxySettings> {
  // deps.logger.debug(), deps.getSetting() ã‚’ä½¿ç”¨
}
```

##### å„ªå…ˆåº¦3: ãƒ†ã‚¹ãƒˆç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼ã®ä½œæˆï¼ˆä¸­ï¼‰

**ç›®çš„**: ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ä¸€è²«ã—ãŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«**: `tests/helpers/testSetup.ts`
```typescript
export function setupTestEnvironment() {
  // process.send ã®ãƒ¢ãƒƒã‚¯
  process.send = vi.fn()

  // Logger ã®ãƒªã‚»ãƒƒãƒˆ
  BackendLogger.resetForTest()

  // DB ãƒ‘ã‚¹ã®è¨­å®š
  process.env.TEST_DB_PATH = ':memory:'
}
```

#### å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| ã‚¿ã‚¹ã‚¯ | å„ªå…ˆåº¦ | äºˆæƒ³å·¥æ•° | çŠ¶æ…‹ |
|--------|--------|---------|------|
| Logger Lazy Initialization | é«˜ | 2h | ğŸ”„ è¨ˆç”»ä¸­ |
| Settingså±¤ã®ä¾å­˜æ€§æ³¨å…¥ | ä¸­ | 3h | â³ æœªç€æ‰‹ |
| Fetch Builder ã®ä¾å­˜æ€§æ³¨å…¥ | ä¸­ | 2h | â³ æœªç€æ‰‹ |
| ãƒ†ã‚¹ãƒˆç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼ä½œæˆ | ä¸­ | 1h | â³ æœªç€æ‰‹ |
| ãƒ†ã‚¹ãƒˆä¿®æ­£ã¨å®Ÿè¡Œç¢ºèª | é«˜ | 2h | â³ æœªç€æ‰‹ |

### æœªå®Ÿè£…æ©Ÿèƒ½ï¼ˆPhase 2ä»¥é™ï¼‰

- UIè¨­å®šç”»é¢ï¼ˆãƒ—ãƒ­ã‚­ã‚·ãƒ»è¨¼æ˜æ›¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼‰
- IPC APIï¼ˆè¨­å®šã®å–å¾—ãƒ»æ›´æ–°ãƒ»æ¥ç¶šãƒ†ã‚¹ãƒˆï¼‰
- ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ‰ã®å®Œå…¨ã‚µãƒãƒ¼ãƒˆ
- æ¥ç¶šãƒ†ã‚¹ãƒˆæ©Ÿèƒ½
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„
- macOS/Linuxå¯¾å¿œ

---

## ãƒªã‚¹ã‚¯ã¨åˆ¶ç´„äº‹é …

### æ—¢çŸ¥ã®ãƒªã‚¹ã‚¯

1. **Electronã§ã®NODE_EXTRA_CA_CERTSå•é¡Œ**
   - **ãƒªã‚¹ã‚¯**: Electronã§ã¯`NODE_EXTRA_CA_CERTS`ãŒæ­£ã—ãå‹•ä½œã—ãªã„å ±å‘Šã‚ã‚Š
   - **å¯¾ç­–**: ç’°å¢ƒå¤‰æ•°ã«é ¼ã‚‰ãšã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§è¨¼æ˜æ›¸ã‚’èª­ã¿è¾¼ã‚“ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«è¨­å®š

2. **PACï¼ˆProxy Auto-Configï¼‰ãƒ•ã‚¡ã‚¤ãƒ«ã®è¤‡é›‘ã•**
   - **ãƒªã‚¹ã‚¯**: JavaScriptå®Ÿè¡ŒãŒå¿…è¦ã€å®Ÿè£…ãŒè¤‡é›‘
   - **å¯¾ç­–**: ç¬¬1ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯å›ºå®šãƒ—ãƒ­ã‚­ã‚·ã®ã¿ã‚µãƒãƒ¼ãƒˆã€PACã¯å°†æ¥å¯¾å¿œ

3. **ãƒ—ãƒ­ã‚­ã‚·èªè¨¼ï¼ˆNTLM/Kerberosï¼‰**
   - **ãƒªã‚¹ã‚¯**: Windowsèªè¨¼ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ã‚µãƒãƒ¼ãƒˆãŒè¤‡é›‘
   - **å¯¾ç­–**: ç¬¬1ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯Basicèªè¨¼ã®ã¿ã€NTLMç­‰ã¯å°†æ¥å¯¾å¿œ

4. **è¨¼æ˜æ›¸ã®æ›´æ–°**
   - **ãƒªã‚¹ã‚¯**: ä¼æ¥­CAè¨¼æ˜æ›¸ã®æ›´æ–°æ™‚ã«ã‚¢ãƒ—ãƒªå†èµ·å‹•ãŒå¿…è¦
   - **å¯¾ç­–**: å®šæœŸçš„ãªå†èª­ã¿è¾¼ã¿æ©Ÿèƒ½ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¶ç´„

#### Windows

- âœ… ãƒ¬ã‚¸ã‚¹ãƒˆãƒªèª­ã¿å–ã‚Šã«ç‰¹æ¨©ä¸è¦
- âœ… è¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢APIãŒå®‰å®š
- âš ï¸ PAC ãƒ•ã‚¡ã‚¤ãƒ«è§£æã¯è¤‡é›‘

#### macOSï¼ˆå°†æ¥å¯¾å¿œï¼‰

- âš ï¸ Keychainã‚¢ã‚¯ã‚»ã‚¹ã«æ¨©é™ãŒå¿…è¦ãªå ´åˆã‚ã‚Š
- âš ï¸ ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚­ã‚·è¨­å®šèª­ã¿å–ã‚ŠãŒWindowsã‚ˆã‚Šè¤‡é›‘

#### Linuxï¼ˆå°†æ¥å¯¾å¿œï¼‰

- âš ï¸ è¨¼æ˜æ›¸ã‚¹ãƒˆã‚¢ã®å ´æ‰€ãŒãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ç•°ãªã‚‹
- âš ï¸ ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã®æ¨™æº–ãŒãªã„

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

1. **ãƒ—ãƒ­ã‚­ã‚·èªè¨¼æƒ…å ±ã®ä¿è­·**
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…ã§æš—å·åŒ–
   - ãƒ­ã‚°ã«å‡ºåŠ›ã—ãªã„
   - ãƒ¡ãƒ¢ãƒªå†…ã§ã®å®‰å…¨ãªå–ã‚Šæ‰±ã„

2. **ã‚«ã‚¹ã‚¿ãƒ CAè¨¼æ˜æ›¸ã®æ¤œè¨¼**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸè¨¼æ˜æ›¸ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯
   - PEMå½¢å¼ã®æ¤œè¨¼

3. **æ¥ç¶šãƒ†ã‚¹ãƒˆã®å®‰å…¨æ€§**
   - ãƒ†ã‚¹ãƒˆæ¥ç¶šå…ˆã®åˆ¶é™ï¼ˆAI APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ã¿ï¼‰
   - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š

---

## å‚è€ƒè³‡æ–™

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Vercel AI SDK - Providers](https://sdk.vercel.ai/providers)
- [Electron - ProxyConfig](https://www.electronjs.org/docs/latest/api/structures/proxy-config)
- [Node.js - https.Agent](https://nodejs.org/api/https.html#class-httpsagent)
- [OpenSSL 3.2 - Windows Certificate Store](https://github.com/openssl/openssl/pull/21827)

### NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- [https-proxy-agent](https://www.npmjs.com/package/https-proxy-agent)
- [@cypress/get-windows-proxy](https://www.npmjs.com/package/@cypress/get-windows-proxy)
- [win-ca](https://www.npmjs.com/package/win-ca)
- [global-agent](https://www.npmjs.com/package/global-agent)
- [undici](https://www.npmjs.com/package/undici)

### GitHub Issuesãƒ»Discussions

- [Vercel AI SDK - Could I make the ai sdk work through my local proxy?](https://github.com/vercel/ai/discussions/3870)
- [Node.js - Use system certificate store when running under Windows](https://github.com/nodejs/node/issues/51537)
- [Electron - Setting proxy for network traffic](https://github.com/electron/electron/issues/183)

### Stack Overflow

- [How to add custom certificate authority (CA) to nodejs](https://stackoverflow.com/questions/29283040/how-to-add-custom-certificate-authority-ca-to-nodejs)
- [Node httpAgent with proxy and certificates](https://stackoverflow.com/questions/66387428/node-httpagent-with-proxy-and-certificates-https-proxy-agent-with-tls)
- [How do I get system wide proxy settings for Electron app?](https://stackoverflow.com/questions/48221450/how-do-i-get-system-wide-proxy-settings-and-apply-the-same-for-my-electron-app)

### æŠ€è¡“è¨˜äº‹

- [Automatic system proxy configuration for Electron applications - Evan Dontje](https://evandontje.com/2020/04/02/automatic-system-proxy-configuration-for-electron-applications/)
- [Monkey patching tls in node.js to support self-signed certificates](https://medium.com/trabe/monkey-patching-tls-in-node-js-to-support-self-signed-certificates-with-custom-root-cas-25c7396dfd2a)

---

## ä»˜éŒ²: ã‚³ãƒ¼ãƒ‰ä¾‹

### ã‚«ã‚¹ã‚¿ãƒ Fetchå®Ÿè£…ä¾‹

```typescript
// src/backend/ai/fetch.ts
import { HttpsProxyAgent } from 'https-proxy-agent'
import nodeFetch from 'node-fetch'
import type { ProxySettings, CertificateSettings } from '@common/types'

export function createCustomFetch(
  proxySettings: ProxySettings | null,
  certSettings: CertificateSettings | null
): typeof fetch {
  // ãƒ—ãƒ­ã‚­ã‚·ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®š
  let agent: HttpsProxyAgent | undefined

  if (proxySettings?.mode === 'custom' && proxySettings.custom) {
    const { host, port, protocol, auth } = proxySettings.custom
    const proxyUrl = auth
      ? `${protocol}://${auth.username}:${auth.password}@${host}:${port}`
      : `${protocol}://${host}:${port}`

    const agentOptions: any = {}

    // CAè¨¼æ˜æ›¸è¨­å®š
    if (certSettings?.mode === 'custom' && certSettings.custom?.caPaths) {
      const caCerts = certSettings.custom.caPaths.map(path =>
        fs.readFileSync(path, 'utf-8')
      )
      agentOptions.ca = caCerts
    } else if (certSettings?.mode === 'system') {
      // ã‚·ã‚¹ãƒ†ãƒ è¨¼æ˜æ›¸ã‚’å–å¾—
      const systemCerts = await getSystemCertificates()
      agentOptions.ca = systemCerts
    }

    agent = new HttpsProxyAgent(proxyUrl, agentOptions)
  } else if (proxySettings?.mode === 'system') {
    // ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã‚’å–å¾—
    const systemProxy = await getSystemProxy()
    if (systemProxy) {
      const systemCerts = await getSystemCertificates()
      agent = new HttpsProxyAgent(systemProxy.url, { ca: systemCerts })
    }
  }

  // ã‚«ã‚¹ã‚¿ãƒ fetch
  return (input: RequestInfo, init?: RequestInit): Promise<Response> => {
    return nodeFetch(input, {
      ...init,
      agent
    }) as Promise<Response>
  }
}
```

### Windowsãƒ—ãƒ­ã‚­ã‚·å–å¾—ä¾‹

```typescript
// src/backend/platform/windows/proxy.ts
import getWindowsProxy from '@cypress/get-windows-proxy'
import logger from '../../logger'

export async function getWindowsProxySettings(): Promise<{
  url: string | null
  bypass: string[]
} | null> {
  try {
    const proxy = await getWindowsProxy()

    if (!proxy) {
      logger.info('No Windows proxy settings found')
      return null
    }

    // ProxyEnable ãŒ 1 ã®å ´åˆã®ã¿ãƒ—ãƒ­ã‚­ã‚·ãŒæœ‰åŠ¹
    // ProxyServer: "proxy.example.com:8080"
    // ProxyOverride: "<local>;*.example.com"

    return {
      url: proxy.httpProxy || proxy.httpsProxy || null,
      bypass: proxy.noProxy ? proxy.noProxy.split(';') : []
    }
  } catch (error) {
    logger.error('Failed to get Windows proxy settings:', error)
    return null
  }
}
```

### Windowsè¨¼æ˜æ›¸å–å¾—ä¾‹

```typescript
// src/backend/platform/windows/certificate.ts
import winCa from 'win-ca'

export async function getWindowsCertificates(): Promise<string[]> {
  return new Promise((resolve, reject) => {
    const certs: string[] = []

    try {
      winCa({
        format: winCa.der2.pem,
        ondata: (cert: string) => {
          certs.push(cert)
        },
        onend: () => {
          logger.info(`Loaded ${certs.length} certificates from Windows store`)
          resolve(certs)
        },
        onerror: (error: Error) => {
          logger.error('Failed to load Windows certificates:', error)
          reject(error)
        }
      })
    } catch (error) {
      reject(error)
    }
  })
}
```

---

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.1
**æœ€çµ‚æ›´æ–°**: 2025-11-09
**å¤‰æ›´å±¥æ­´**:
- v1.1 (2025-11-09): `windows-system-proxy`ã‚’`@cypress/get-windows-proxy`ã«å¤‰æ›´
- v1.0 (2025-11-09): åˆç‰ˆä½œæˆ

**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼**: å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º1å®Œäº†å¾Œ
